From 99d31512307576e9c06a201728eaa023718d3db7 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Fri, 8 May 2015 16:27:15 -0400
Subject: [PATCH 03/19] Revert "Rename the desktop file to
 gnome-session-properties.desktop"

This reverts commit ac9fd0dc97a17674cb082f80df0b1fcc45bc92bf.
---
 configure.ac                                                            | 2 +-
 data/Makefile.am                                                        | 2 +-
 ...ession-properties.desktop.in.in => session-properties.desktop.in.in} | 0
 po/POTFILES.in                                                          | 1 +
 po/POTFILES.skip                                                        | 1 +
 5 files changed, 4 insertions(+), 2 deletions(-)
 rename data/{gnome-session-properties.desktop.in.in => session-properties.desktop.in.in} (100%)

diff --git a/configure.ac b/configure.ac
index 47caf9c8..cc554a8a 100644
--- a/configure.ac
+++ b/configure.ac
@@ -343,61 +343,61 @@ if test $enable_ipv6 = yes; then
   dnl =================================================================
   dnl Now we would check for specific function like getaddrinfo.
   dnl =================================================================
   have_getaddrinfo=no
   if test $have_ipv6=yes; then
     AC_CHECK_FUNC(getaddrinfo, have_getaddrinfo=yes)
     if test $have_getaddrinfo != yes; then
       # getaddrinfo is not in the default libraries.  See if it's in some other.
       for lib in bsd socket inet; do
         AC_CHECK_LIB($lib, getaddrinfo, [LIBS="$LIBS -l$lib";have_getaddrinfo=yes; break])
       done
     fi
     if test $have_getaddrinfo=yes; then
       AC_DEFINE(ENABLE_IPV6, 1, [Define if IPV6 is supported])
       have_full_ipv6=yes
     fi
   fi
 fi
 dnl ==============================================================================
 dnl End of IPv6 checks
 dnl ==============================================================================
 
 AC_CONFIG_FILES([
 Makefile
 capplet/Makefile
 doc/Makefile
 doc/dbus/Makefile
 doc/dbus/gnome-session.xml
 doc/man/Makefile
 data/Makefile
-data/gnome-session-properties.desktop.in
+data/session-properties.desktop.in
 data/org.gnome.SessionManager.gschema.xml
 data/icons/Makefile
 data/icons/16x16/Makefile
 data/icons/22x22/Makefile
 data/icons/24x24/Makefile
 data/icons/32x32/Makefile
 data/icons/48x48/Makefile
 data/icons/scalable/Makefile
 data/icons/symbolic/Makefile
 gnome-session/Makefile
 tools/Makefile
 po/Makefile.in
 ])
 AC_OUTPUT
 
 dnl ---------------------------------------------------------------------------
 dnl - Show summary
 dnl ---------------------------------------------------------------------------
 
 echo "
               gnome-session $VERSION
               `echo gnome-session $VERSION | sed "s/./=/g"`
 
         prefix:                   ${prefix}
         exec_prefix:              ${exec_prefix}
         libdir:                   ${libdir}
         bindir:                   ${bindir}
         sbindir:                  ${sbindir}
         sysconfdir:               ${sysconfdir}
         localstatedir:            ${localstatedir}
diff --git a/data/Makefile.am b/data/Makefile.am
index 6167d10f..e8a0e05e 100644
--- a/data/Makefile.am
+++ b/data/Makefile.am
@@ -1,58 +1,58 @@
 SUBDIRS = icons
 
 uidir = $(pkgdatadir)
 ui_DATA = \
 	session-properties.ui
 
 if BUILD_SESSION_SELECTOR
 ui_DATA += session-selector.ui
 endif
 
 hwcompatdir = $(pkgdatadir)
 hwcompat_DATA = hardware-compatibility
 
 xsessiondir = $(datadir)/xsessions
 xsession_in_files = gnome.desktop.in gnome-xorg.desktop.in
 
 if BUILD_SESSION_SELECTOR
 xsession_in_files += gnome-custom-session.desktop.in
 endif
 
 xsession_DATA = $(xsession_in_files:.desktop.in=.desktop)
 
 wayland_sessiondir = $(datadir)/wayland-sessions
 wayland_session_in_files = gnome.desktop.in
 wayland_session_DATA = $(wayland_session_in_files:.desktop.in=.desktop)
 
 desktopdir = $(datadir)/applications
-desktop_in_files = gnome-session-properties.desktop.in
+desktop_in_files = session-properties.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
 sessiondir = $(datadir)/gnome-session/sessions
 session_in_in_files = gnome.session.desktop.in.in gnome-dummy.session.desktop.in.in
 session_in_files = $(session_in_in_files:.session.desktop.in.in=.session.desktop.in)
 session_DATA = $(session_in_files:.session.desktop.in=.session)
 
 %.session.desktop.in: %.session.desktop.in.in Makefile
 	$(AM_V_GEN)sed \
 		-e "s|\@LIBEXECDIR\@|$(libexecdir)|" \
 		$< > $@
 
 %.session: %.session.desktop.in   $(INTLTOOL_MERGE) $(wildcard $(top_srcdir)/po/*.po) ; LC_ALL=C $(INTLTOOL_MERGE) -d -u -c $(top_builddir)/po/.intltool-merge-cache $(top_srcdir)/po $< $@
 
 @INTLTOOL_DESKTOP_RULE@
 @INTLTOOL_XML_NOMERGE_RULE@
 
 gsettings_SCHEMAS = org.gnome.SessionManager.gschema.xml
 @GSETTINGS_RULES@
 
 migrationdir = $(datadir)/GConf/gsettings
 dist_migration_DATA = gnome-session.convert
 
 EXTRA_DIST =					\
 	$(xsession_in_files)			\
 	$(session_in_in_files)			\
 	$(wayland_session_in_files)		\
 	$(gsettings_SCHEMAS:.xml=.xml.in)	\
 	session-selector.ui			\
 	gnome-custom-session.desktop.in		\
diff --git a/data/gnome-session-properties.desktop.in.in b/data/session-properties.desktop.in.in
similarity index 100%
rename from data/gnome-session-properties.desktop.in.in
rename to data/session-properties.desktop.in.in
diff --git a/po/POTFILES.in b/po/POTFILES.in
index 5cb5123d..08d2eb06 100644
--- a/po/POTFILES.in
+++ b/po/POTFILES.in
@@ -1,24 +1,25 @@
 # List of source files containing translatable strings.
 # Please keep this file sorted alphabetically.
 capplet/gsm-app-dialog.c
 capplet/gsm-properties-dialog.c
 capplet/gsp-app.c
 capplet/main.c
 data/gnome-custom-session.desktop.in
 data/gnome.desktop.in
 data/gnome-xorg.desktop.in
 data/gnome-dummy.session.desktop.in.in
 data/gnome.session.desktop.in.in
 data/gnome-session-properties.desktop.in.in
 [type: gettext/glade]data/session-selector.ui
+data/session-properties.desktop.in.in
 [type: gettext/glade]data/session-properties.ui
 gnome-session/gsm-fail-whale-dialog.c
 gnome-session/gsm-manager.c
 gnome-session/gsm-process-helper.c
 gnome-session/gsm-util.c
 gnome-session/gsm-xsmp-client.c
 gnome-session/gsm-xsmp-server.c
 gnome-session/main.c
 tools/gnome-session-inhibit.c
 tools/gnome-session-selector.c
 tools/gnome-session-quit.c
diff --git a/po/POTFILES.skip b/po/POTFILES.skip
index 91b41569..e6470914 100644
--- a/po/POTFILES.skip
+++ b/po/POTFILES.skip
@@ -1,5 +1,6 @@
 # List of source files containing translatable strings that should not be
 # translated.
 # Please keep this file sorted alphabetically.
 data/gnome-dummy.session.desktop.in
 data/gnome.session.desktop.in
+data/session-properties.desktop.in
-- 
2.12.0

